---
import NavBar from '../components/NavBar.astro'

import '../styles/global.css';
import Hero from '../components/Hero.astro'
import Concept from '../components/Concept.astro'
import Contribute from '../components/Contribute.astro'
import BlogList from '../components/BlogList.astro'
import Footer from '../components/Footer.astro'


---

<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Distributed Interactive Platform - Una nuova architettura P2P</title>
      <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"></link>
    <meta name="description" content="Framework distribuito per esperienze interattive modulari basato su peer-to-peer, Babylon.js e ECSY" />
  </head>
 <body class="bg-slate-900 text-white min-h-screen">
    <!-- Navigation -->
    <NavBar></NavBar>

    <!-- Hero Section -->
    <Hero></Hero>
    <!-- Concept Section -->
    <Concept></Concept>

    <!-- Architecture Section -->
    <section id="architecture" class="py-20 px-6 bg-slate-800/50">
        <div class="container mx-auto">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold mb-4">Perché questa architettura</h2>
                    <p class="text-xl text-slate-300">I vantaggi di un approccio distribuito per il web interattivo</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold mb-2">Performance scalabile</h3>
                                <p class="text-slate-300">Il carico viene distribuito automaticamente tra i peer, migliorando le performance man mano che la rete cresce.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold mb-2">Indipendenza infrastrutturale</h3>
                                <p class="text-slate-300">Nessuna dipendenza da server centralizzati, cloud provider o infrastructure-as-a-service.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold mb-2">Sviluppo collettivo</h3>
                                <p class="text-slate-300">Perfetto per progetti open source e sviluppo decentralizzato, dove ogni contributor può ospitare i propri moduli.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="code-block rounded-xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold">Stack tecnologico</h4>
                            <div class="flex space-x-2">
                                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                            </div>
                        </div>
                        <div class="space-y-4 text-sm">
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 bg-tech-blue rounded-full"></div>
                                <span class="text-slate-300">Babylon.js</span>
                                <span class="text-slate-500">Motore grafico WebGL</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 bg-tech-purple rounded-full"></div>
                                <span class="text-slate-300">ECSY</span>
                                <span class="text-slate-500">Entity Component System</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 bg-pink-500 rounded-full"></div>
                                <span class="text-slate-300">WebRTC</span>
                                <span class="text-slate-500">Comunicazione P2P</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                <span class="text-slate-300">Orchestratore</span>
                                <span class="text-slate-500">Coordinamento distribuito</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <BlogList></BlogList>
    <!-- CTA Section -->
<Contribute></Contribute>

    <!-- Footer -->
<Footer></Footer>

    <!-- Video Modal -->
    <div id="videoModal" class="modal">
        <div class="bg-slate-900 rounded-xl p-6 max-w-4xl mx-auto relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <div class="text-center">
                <h3 class="text-2xl font-bold mb-4">Demo della Piattaforma Distribuita</h3>
                <p class="text-slate-300 mb-6">Guarda come funziona la navigazione P2P tra scene distribuite</p>
                <!-- Placeholder per il video - sostituire con il vero video -->
                <div class="bg-slate-800 rounded-lg p-12 text-center">
                    <div class="w-24 h-24 bg-gradient-to-br from-tech-blue to-tech-purple rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15M9 10v4a1 1 0 001 1h4M9 10V9a1 1 0 011-1h4a1 1 0 011 1v1M9 10H8a1 1 0 00-1 1v4a1 1 0 001 1h1"></path>
                        </svg>
                    </div>
                    <p class="text-slate-400 mb-4">Video demo in arrivo</p>
                    <p class="text-sm text-slate-500">
                        Mostreremo la navigazione fluida tra scene 3D distribuite,<br>
                        il caricamento dinamico dei moduli e la sincronizzazione P2P
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Modal functionality
        function openModal() {
            document.getElementById('videoModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('videoModal').classList.remove('active');
        }

        // Close modal when clicking outside
        document.getElementById('videoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Navigation background on scroll
        window.addEventListener('scroll', function() {
            const nav = document.querySelector('nav');
            if (window.scrollY > 50) {
                nav.classList.add('bg-slate-900');
                nav.classList.remove('bg-slate-900/90');
            } else {
                nav.classList.add('bg-slate-900/90');
                nav.classList.remove('bg-slate-900');
            }
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Apply animation to blog cards
        document.querySelectorAll('.blog-card').forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
            observer.observe(card);
        });

        // Apply animation to tech cards
        document.querySelectorAll('.tech-card').forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = `opacity 0.6s ease ${index * 0.2}s, transform 0.6s ease ${index * 0.2}s`;
            observer.observe(card);
        });

        // Mobile menu toggle (if needed)
        function toggleMobileMenu() {
            // Implementation for mobile menu toggle
            console.log('Mobile menu toggle');
        }

        // Newsletter signup (placeholder)
        function subscribeNewsletter() {
            alert('Grazie per il tuo interesse! La newsletter sarà disponibile presto.');
        }

        // GitHub link (placeholder)
        function openGitHub() {
            alert('Repository GitHub sarà pubblicato presto!');
        }

        // Early contributor contact (placeholder)
        function becomeContributor() {
            alert('Grazie per il tuo interesse! Ti contatteremo presto per discutere le opportunità di contribuzione.');
        }

        // Add event listeners to CTA buttons
        document.addEventListener('DOMContentLoaded', function() {
            // Update newsletter button
			

document.addEventListener('DOMContentLoaded', () => {
  const subscribeBtn = document.querySelector('[data-action="subscribe"]');
  if (subscribeBtn) {
    subscribeBtn.addEventListener('click', (e) => {
      e.preventDefault();
      subscribeNewsletter();
    });
  }

  const githubBtn = document.querySelector('[data-action="github"]');
  if (githubBtn) {
    githubBtn.addEventListener('click', (e) => {
      e.preventDefault();
      openGitHub();
    });
  }

  const contributorBtn = document.querySelector('[data-action="contribute"]');
  if (contributorBtn) {
    contributorBtn.addEventListener('click', (e) => {
      e.preventDefault();
      becomeContributor();
    });
  }
});

        });






    </script>
    <script is:inline>
// Gestione speciale per hash link dal blog
document.addEventListener('click', (e) => {
  const link = e.target.closest('a[href^="#"], a[href^="/#"]');
  if (!link) return;

  const href = link.getAttribute('href');
  const isFromBlog = window.location.pathname.startsWith('/blog');

  // Se siamo nel blog e clicchiamo un hash link
  if (isFromBlog && href.startsWith('#')) {
    e.preventDefault();
    window.location.href = `/${href}`;
    return;
  }

  // Se siamo nel blog e clicchiamo un link homepage-hash
  if (isFromBlog && href.startsWith('/#')) {
    e.preventDefault();
    window.location.href = href;
    return;
  }
});
</script>


  </body>
</html>
